General relativity describes how matter and energy curve the fabric of space and time.
Einstein first wrote down the theory more than a century ago, and it is still our most accurate theory of gravitational effects.
It makes accurate and counterintuitive predictions, which experiments have borne out.
This chapter surveys the basics of general relativity.
We will then use this to derive the Tolman-Oppenheimer-Volkoff (TOV) equation, a differential equation used to model stars.

(Newtonian gravity??)
\todo{Short about newtonian gravity/motivation}

\section{General relativity}
This section is based on~\cite{carrollSpacetimeGeometryIntroduction2019}.
The derivation of the spherically symmetric metric is done using computer code, as descirbed in \autoref{appendix: code}.

\subsection{Einstein's field equations}

General relativity describes spacetime as a smooth manifold $\Em$, with a (pseudo-Riemannian) metric, $g_{\mu \nu}$.
This metric is treated as a dynamical field, which is affected by the presence of matter and energy.
The matter and energy contents of spacetime are encoded in the stress-energy tensor $T_{\mu \nu}$, while the behavior of $g^{\mu \nu}$ is encoded in a scalar Lagrangian density.
Some of the mathematics used in this section, such as functional derivatives, are covered in \autoref{appendix: Functional derivatives}.

The most obvious---and correct---choice as the Lagrangian for $g^{\mu \nu}$ is the Ricci scalar, which results in the Einstein-Hilbert action,
%
\begin{equation}
    \label{Einstein-Hilbert action}
    S_{\text{EH}} = \frac{1}{2\kappa}\int_{\Em} \dd^n x \, \sqrt{|g|}\, R.
\end{equation}
%
The $\sqrt{|g|}$-factor is included for the integral to be coordinate-independent, as discussed in  \autoref{subsection: integration on manifolds}.\footnote{The gravitational action can also include a cosmological constant, modifying the Lagrangian to $R + 2 \Lambda$. This constant does not affect the subject of this thesis and is therefore not included here.}
The $\kappa$ is a constant and decides how strong the coupling of gravity to matter and energy is.
This constant can then be related to Newton's constant of gravitation $G$ by $\kappa = 8 \pi G$.
When including the contributions from other fields with an action $S_\text{m}$, the total action becomes 
%
\begin{equation}
    S = S_\text{EH} + S_\text{m}.
\end{equation}
%
The equations of motion of the dynamical field, which in this case is the metric, are given by Hamilton's principle of stationary action.
Using functional derivatives, as defined in \autoref{subsection: functional calculus on a curved manifold}, this is stated as
%
\begin{equation}
    \fdv{S}{g^{\mu\nu}} = 0,
\end{equation}
%
We define the stress-energy tensor as
%
\begin{equation}
    \label{definition stress energy densor}
    T_{\mu\nu} = - 2 \fdv{S_\text{m}}{g^{\mu \nu}}.
\end{equation}
%
The functional derivative of the Einstein-Hilbert action is evaluated in \autoref{subsection: functional derivative of the einstein-hilbert action}, and with the result, \autoref{functional derivatie einstein-hilber action}, we get the Einstein field equations
%
\begin{equation}
    \label{Einstein field equations}
    R_{\mu \nu} - \frac{1}{2} R g_{\mu \nu} = \kappa T_{\mu \nu},
\end{equation}
%
The left-hand side of the Einstein field equations is called the Einstein tensor, $G_{\mu \nu} = R_{\mu \nu} - \frac{1}{2} R g_{\mu \nu}$. This tensor obeys the identity
%
\begin{equation}
    \label{Einstein tensor bianchi identity}
    \nabla^\mu G_{\mu \nu} = 0,
\end{equation}
%
as a consequence of the more general Bianchi identity, \autoref{Binachi identiy}.


\subsection{Spherically symmetric spacetime}

To model stars, we will assume that the metric is spherically symmetric and time-independent.
In this case, the most general metric can be written, at least locally, as~\autocite{carrollSpacetimeGeometryIntroduction2019}
%
\begin{equation}
    \dd s^2 
    = e^{2\alpha(r)} \dd t^2 - e^{2 \beta(r)} \dd r^2 - 
    r^2 (\dd \theta^2 + \sin^2 \theta \, \dd \varphi^2),
\end{equation}
%
where $\alpha$ and $\beta$ are general functions of the radial coordinate $r$.
In matrix form, this corresponds to 
%
\begin{equation}
    \label{spherically symmetric metric}
    g_{\mu \nu} =
    \left(
        \begin{matrix}
            e^{2 \alpha{\left(r \right)}} & 0 & 0 & 0\\
            0 & - e^{2 \beta{\left(r \right)}} & 0 & 0
            \\0 & 0 & - r^{2} & 0
            \\0 & 0 & 0 & - r^{2} \sin^{2}{\left(\theta \right)}
        \end{matrix}
     \right).
\end{equation}
%
Using \autoref{christoffel symbols from metric}, we can now compute the Christoffel symbols in terms of the unknown functions.
These computations in this subsection are done using computer code, which is shown in \autoref{appendix: code}.
The results are
%
\begin{align}
    \Gamma^t_{\mu \nu}
    & =
    \left(
        \begin{matrix}
            0 & \odv{}{r} \alpha{\left(r \right)} & 0 & 0\\\odv{}{r} \alpha{\left(r \right)} & 0 & 0 & 0\\0 & 0 & 0 & 0\\0 & 0 & 0 & 0
        \end{matrix}
    \right), \\
    \Gamma^r_{\mu \nu}
    &=
    \left(
        \begin{matrix}
            e^{2 \alpha{\left(r \right)}} e^{- 2 \beta{\left(r \right)}} \odv{}{r} \alpha{\left(r \right)} & 0 & 0 & 0\\0 & \odv{}{r} \beta{\left(r \right)} & 0 & 0\\0 & 0 & - r e^{- 2 \beta{\left(r \right)}} & 0\\0 & 0 & 0 & - r e^{- 2 \beta{\left(r \right)}} \sin^{2}{\left(\theta \right)}
        \end{matrix}
     \right), \\
     \Gamma^\theta_{\mu \nu} 
     & =
     \left(
         \begin{matrix}
            0 & 0 & 0 & 0\\0 & 0 & \frac{1}{r} & 0\\0 & \frac{1}{r} & 0 & 0\\0 & 0 & 0 & - \sin{\left(\theta \right)} \cos{\left(\theta \right)}
        \end{matrix}
    \right), \\
    \Gamma^\phi_{\mu \nu} 
    &=
    \left(
        \begin{matrix}
            0 & 0 & 0 & 0\\0 & 0 & 0 & \frac{1}{r}\\0 & 0 & 0 & \frac{\cos{\left(\theta \right)}}{\sin{\left(\theta \right)}}\\0 & \frac{1}{r} & \frac{\cos{\left(\theta \right)}}{\sin{\left(\theta \right)}} & 0
        \end{matrix}
    \right).
\end{align}
%
The symbols not included are zero.
Substituting these results into \autoref{riemann tensor in terms of christoffel symbols} gives the Riemann tensor curvature tensor.
We can then obtain the Ricci tensor by taking the trace, as shown in \autoref{Ricci tensor}.
The results are
%
\begin{align}
    \label{tt component ricci tensor}
    R_{tt}
    & =
    \left[
        r \left(\odv{}{r} \alpha{\left(r \right)}\right)^{2} 
        - r \odv{}{r} \alpha{\left(r \right)} \odv{}{r} \beta{\left(r \right)} 
        + r \odv[2]{}{r} \alpha{\left(r \right)} 
        + 2 \odv{}{r} \alpha{\left(r \right)}
    \right]
    \frac{
         e^{2 \alpha{\left(r \right)}} e^{- 2 \beta{\left(r \right)}}}{r}, \\
    \label{rr component ricci tensor}
    R_{rr}
    & =
    - \frac{1}{r}
    \left[
        r \left(\odv{}{r} \alpha{\left(r \right)}\right)^{2} 
        - r \odv{}{r} \alpha{\left(r \right)} \odv{}{r} \beta{\left(r \right)} 
        + r \odv[2]{}{r} \alpha{\left(r \right)} - 2 \odv{}{r} \beta{\left(r \right)} 
    \right],\\
    \label{thetatheta component ricci tensor}
    R_{\theta \theta}
    &=
    -  
    \left[
        r \odv{}{r} \alpha{\left(r \right)} - r \odv{}{r} \beta{\left(r \right)} - e^{2 \beta{\left(r \right)}} + 1
    \right]
        e^{- 2 \beta{\left(r \right)}}, \\
    R_{\varphi \varphi} & = R_{\theta \theta} \sin^2( \theta).
\end{align}
%
All other components are zero.
Finally, the trace of the Ricci tensor gives the Ricci scalar,
%
\begin{align}
    \nonumber
    R =
    \, \frac{2 e^{- 2 \beta{\left(r \right)}}}{r^{2}}
    \bigg[
        &
        r^{2} \left(\odv{}{r} \alpha{\left(r \right)}\right)^{2} 
        - r^{2} \odv{}{r} \alpha{\left(r \right)} \odv{}{r} \beta{\left(r \right)}
        \\ &
        + r^{2} \frac{d^{2}}{d r^{2}} \alpha{\left(r \right)} 
        + 2 r \odv{}{r} \alpha{\left(r \right)} 
        - 2 r \odv{}{r} \beta{\left(r \right)} - e^{2 \beta{\left(r \right)}} + 1
    \bigg].
\end{align}
%
 The unknown functions $\alpha$ and $\beta$ are now determined by the matter and energy content of the universe, which is encoded in $T_{\mu \nu}$, through Einstein's field equation, \autoref{Einstein field equations}. 



\subsection{The Schwarzschild metric}


The simples case for a matter distribution in spacetime is $T_{\mu \nu} = 0$.
Although this might only seem to be useful to model a non-empty universe, it can be combined with a central point particle and empty space elsewhere.
In this case, the Einstein equations are simply $R_{\mu \nu} - \frac{1}{2}R g_{\mu \nu} = 0$.
We can show that the trace of the Ricci tensor is zero by taking the trace of this equation, simplifying it to $R_{\mu \nu} = 0$.
By combining \autoref{tt component ricci tensor} and \autoref{rr component ricci tensor}, we find
%
\begin{equation}
    R_{tt} + e^{2(\alpha - \beta)}R_{rr} = 2 \odv{}{r} \left(\alpha + \beta\right) = 0,
\end{equation}
%
which implies $\alpha = -\beta + \const$
The constant corresponds to rescaling the coordinates, which allows us to set it to zero.
From \autoref{thetatheta component ricci tensor}, we get
%
\begin{equation}
    e^{2 \beta} R_{\theta \theta} = - 2 r\odv{}{r} \alpha - e^{-2\alpha} + 1 = 0,
\end{equation}
%
which may be restated as
%
\begin{equation}
    \odv{}{r} \left(r e^{2 \alpha}\right) = 1,
\end{equation}
%
This equation has the solution
%
\begin{equation}
    e^{2\alpha(r)} = e^{-2 \beta(r)} = \left( 1- \frac{R_s}{r} \right),
\end{equation}
%
where $R_s$, the Schwarzschild radius, is a constant.
Using the weak field limit, we can match the solution to Newtonian gravity and show that $R_s = 2 G M$, where $G$ is Newton's constant of gravitation and $M$ is the mass of the point particle.
\todo{Gj√∏re weak field limit?}
The metric is then
%
\begin{equation}
    \label{Schwarzchild metric}
    \dd s^2 
    = 
    \left( 1 - \frac{2 G M}{r} \right) \dd t^2
    -\left( 1 - \frac{2 G M}{r} \right)^{-1} \dd r^2
    - r^2 \left(\dd \theta^2 + \sin^2 \theta \dd \varphi^2\right).
\end{equation}
%





