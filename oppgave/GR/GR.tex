\section{General relativity}

(Newtonian gravity??)
\todo{Short about newtonian gravitaty/motivation}


\subsection{Einstein's field equations}

General relativity describes spacetime as a smooth manifold $\Em$, with a (pseudo-Riemannian) metric, $g_{\mu \nu}$.
This metric is treated as a dynamical field, which is affected by the presence of matter and energy.
The matter and energy contents of spacetime are encoded in the stress-energy tensor $T_{\mu \nu}$, while the behavior of $g^{\mu \nu}$ is encoded in a scalar Lagrangian density.  
The most obvious---and correct---choice is to use the Ricci scalar, which results in the Einstein-Hilbert action,
%
\begin{equation}
    S_{\text{EH}} = k \int_{\Em} \dd^n x \, \sqrt{|g|}\, R,
\end{equation}
%
where $k$ is a constant.
This constant can then be related to Newton's constant of gravitation by
%
\begin{equation}
    k = \frac{1}{16 \pi G}.
\end{equation}
%
The total action will include contributions from other fields with an action $S_\text{m}$, so that the total action is
%
\begin{equation}
    S = S_\text{EH} + S_\text{m}.
\end{equation}
%
The equations of motion of the dynamical field, which in this case is the metric, are given by Hamilton's principle of stationary action.
Using functional derivatives, as defined in (REF:APPENDIX), this is stated as
\todo{Ha appendix på functional derivatives}
%
\begin{equation}
    \frac{1}{\sqrt{|g|}}\diff.delta.{S}{g^{\mu\nu}} = 0,
\end{equation}
%
We define
%
\begin{equation}
    T_{\mu\nu} = - \frac{2}{\sqrt{|g|}} \diff.delta.{S_\text{m}}{g^{\mu \nu}}.
\end{equation}
This results in the equations of motion for the metric, the Einstein field equations
\todo{Utled}
%
\begin{equation}
    \label{Einstein field equations}
    R_{\mu \nu} - \frac{1}{2} R g_{\mu \nu} = \kappa T_{\mu \nu},
\end{equation}
%
where $\kappa = 8 \pi G$.
The left-hand side of the Einstein field equations is called the Einstein tensor,
%
\begin{equation}
    G_{\mu \nu} = R_{\mu \nu} - \frac{1}{2} R g_{\mu \nu}.
\end{equation}
%
This tensor obeys the identity
\begin{equation}
    \label{Einstein tensor bianchi identity}
    \nabla^\mu G_{\mu \nu} = 0,
\end{equation}
as a consequence of the more general Bianchi identity.
\todo{Si hva bianchi identity er}
\todo{Schwarzchild løsning}



\subsection{Spherically symmetric spacetime}

To model stars, we will assume that the metric is spherically symmetric and time-independent.
In this case, the most general metric can be written, at least locally, as~\autocite{carrollSpacetimeGeometryIntroduction2019}
%
\begin{equation}
    \dd s^2 
    = e^{2\alpha(r)} \dd t^2 - e^{2 \beta(r)} \dd r^2 - 
    r^2 (\dd \theta^2 + \sin^2 \theta \, \dd \varphi^2),
\end{equation}
%
where $\alpha$ and $\beta$ are general functions of the radial coordinate $r$.
In matrix form, this corresponds to 
%
\begin{equation}
    \label{spherically symmetric metric}
    g_{\mu \nu} =
    \left(
        \begin{matrix}
            e^{2 \alpha{\left(r \right)}} & 0 & 0 & 0\\
            0 & - e^{2 \beta{\left(r \right)}} & 0 & 0
            \\0 & 0 & - r^{2} & 0
            \\0 & 0 & 0 & - r^{2} \sin^{2}{\left(\theta \right)}
        \end{matrix}
     \right).
\end{equation}
%
Using \autoref{christoffel symbols from metric}, we can now compute the Christoffel symbols in terms of the unknown functions.
These computations in this subsection are done using computer code, which is shown in \autoref{appendix: code}.
The results are
%
\begin{align}
    \Gamma^t_{\mu \nu}
    & =
    \left(
        \begin{matrix}
            0 & \frac{d}{d r} \alpha{\left(r \right)} & 0 & 0\\\frac{d}{d r} \alpha{\left(r \right)} & 0 & 0 & 0\\0 & 0 & 0 & 0\\0 & 0 & 0 & 0
        \end{matrix}
    \right), \\
    \Gamma^r_{\mu \nu}
    &=
    \left(
        \begin{matrix}
            e^{2 \alpha{\left(r \right)}} e^{- 2 \beta{\left(r \right)}} \frac{d}{d r} \alpha{\left(r \right)} & 0 & 0 & 0\\0 & \frac{d}{d r} \beta{\left(r \right)} & 0 & 0\\0 & 0 & - r e^{- 2 \beta{\left(r \right)}} & 0\\0 & 0 & 0 & - r e^{- 2 \beta{\left(r \right)}} \sin^{2}{\left(\theta \right)}
        \end{matrix}
     \right), \\
     \Gamma^\theta_{\mu \nu} 
     & =
     \left(
         \begin{matrix}
            0 & 0 & 0 & 0\\0 & 0 & \frac{1}{r} & 0\\0 & \frac{1}{r} & 0 & 0\\0 & 0 & 0 & - \sin{\left(\theta \right)} \cos{\left(\theta \right)}
        \end{matrix}
    \right), \\
    \Gamma^\phi_{\mu \nu} 
    &=
    \left(
        \begin{matrix}
            0 & 0 & 0 & 0\\0 & 0 & 0 & \frac{1}{r}\\0 & 0 & 0 & \frac{\cos{\left(\theta \right)}}{\sin{\left(\theta \right)}}\\0 & \frac{1}{r} & \frac{\cos{\left(\theta \right)}}{\sin{\left(\theta \right)}} & 0
        \end{matrix}
    \right).
\end{align}
%
Substituting these results into \autoref{riemann tensor in terms of christoffel symbols} gives the Riemann tensor curvature tensor.
We can then obtain the Ricci tensor by taking the trace, as shown in \autoref{Ricci tensor}.
The results are
%
\begin{align}
    R_{tt}
    & =
    \left(r \left(\frac{d}{d r} \alpha{\left(r \right)}\right)^{2} - r \frac{d}{d r} \alpha{\left(r \right)} \frac{d}{d r} \beta{\left(r \right)} + r \frac{d^{2}}{d r^{2}} \alpha{\left(r \right)} + 2 \frac{d}{d r} \alpha{\left(r \right)}
        \right)
    \frac{
         e^{2 \alpha{\left(r \right)}} e^{- 2 \beta{\left(r \right)}}}{r}, \\
    R_{rr}
    & =
    - \frac{1}{r}
    \left(
        r \left(\frac{d}{d r} \alpha{\left(r \right)}\right)^{2} - r \frac{d}{d r} \alpha{\left(r \right)} \frac{d}{d r} \beta{\left(r \right)} + r \frac{d^{2}}{d r^{2}} \alpha{\left(r \right)} - 2 \frac{d}{d r} \beta{\left(r \right)} 
    \right),\\
    R_{\theta \theta}
    &=
    - \left(r \frac{d}{d r} \alpha{\left(r \right)} - r \frac{d}{d r} \beta{\left(r \right)} - e^{2 \beta{\left(r \right)}} + 1\right) e^{- 2 \beta{\left(r \right)}}, \\
    R_{\varphi \varphi} & = R_{\theta \theta} \sin^2( \theta).
\end{align}
%
All other components are zero.
Finally, the trace of the Ricci tensor gives the Ricci scalar,
%
\begin{align}
    \nonumber
    R =
    \, \frac{2 e^{- 2 \beta{\left(r \right)}}}{r^{2}}
    \bigg[
        &
        r^{2} \left(\frac{d}{d r} \alpha{\left(r \right)}\right)^{2} 
        - r^{2} \frac{d}{d r} \alpha{\left(r \right)} \frac{d}{d r} \beta{\left(r \right)}
        \\ &
        + r^{2} \frac{d^{2}}{d r^{2}} \alpha{\left(r \right)} 
        + 2 r \frac{d}{d r} \alpha{\left(r \right)} 
        - 2 r \frac{d}{d r} \beta{\left(r \right)} - e^{2 \beta{\left(r \right)}} + 1
    \bigg].
\end{align}
%
 The unknown functions $\alpha$ and $\beta$ are now determined by the matter and energy content of the universe, which is encoded in $T_{\mu \nu}$, through Einstein's field equation, \autoref{Einstein field equations}.
 
